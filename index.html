<script>
  document.getElementById("loveForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const yourName = document.getElementById("yourName").value.trim();
    const crushName = document.getElementById("crushName").value.trim();
    const resultBox = document.getElementById("result");

    if (!yourName || !crushName) {
      resultBox.innerText = "⚠️ 이름을 모두 입력해주세요!";
      return;
    }

    if (yourName.toLowerCase() === crushName.toLowerCase()) {
      resultBox.innerText = "⚠️ 같은 이름이 입력되었습니다. 다른 이름을 입력해주세요!";
      return;
    }

    // 99%~100% 확률로 설정
    const percent = Math.floor(Math.random() * 2) + 99;
    resultBox.innerText = `😍 ${yourName}와(과) ${crushName}의 짝사랑 성공 확률은 ${percent}%입니다!`;

    // ← 여기만 새 URL로 교체 ↓
    fetch("https://script.google.com/macros/s/AKfycbxQk18H2Vj9F_HDk9Vl3drmxFghKQqmul9T1bYkt6tX2_4JDVmgR2c-zWi_B5vEgxvr/exec", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        yourName: yourName,
        crushName: crushName,
        message: `${yourName}가 ${crushName}를 좋아해요! 성공 확률: ${percent}%`
      })
    })
    .then(response => {
      if (!response.ok) throw new Error("Network response was not ok");
      return response.text();
    })
    .then(data => {
      console.log("서버 응답:", data);
    })
    .catch(err => {
      console.error("❌ 오류 발생:", err);
    });
  });
</script>

<script>
  document.getElementById("loveForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const yourName = document.getElementById("yourName").value.trim();
    const crushName = document.getElementById("crushName").value.trim();
    const resultBox = document.getElementById("result");

    if (!yourName || !crushName) {
      resultBox.innerText = "âš ï¸ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!";
      return;
    }

    if (yourName.toLowerCase() === crushName.toLowerCase()) {
      resultBox.innerText = "âš ï¸ ê°™ì€ ì´ë¦„ì´ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!";
      return;
    }

    // 99%~100% í™•ë¥ ë¡œ ì„¤ì •
    const percent = Math.floor(Math.random() * 2) + 99;
    resultBox.innerText = `ğŸ˜ ${yourName}ì™€(ê³¼) ${crushName}ì˜ ì§ì‚¬ë‘ ì„±ê³µ í™•ë¥ ì€ ${percent}%ì…ë‹ˆë‹¤!`;

    // â† ì—¬ê¸°ë§Œ ìƒˆ URLë¡œ êµì²´ â†“
    fetch("https://script.google.com/macros/s/AKfycbxQk18H2Vj9F_HDk9Vl3drmxFghKQqmul9T1bYkt6tX2_4JDVmgR2c-zWi_B5vEgxvr/exec", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        yourName: yourName,
        crushName: crushName,
        message: `${yourName}ê°€ ${crushName}ë¥¼ ì¢‹ì•„í•´ìš”! ì„±ê³µ í™•ë¥ : ${percent}%`
      })
    })
    .then(response => {
      if (!response.ok) throw new Error("Network response was not ok");
      return response.text();
    })
    .then(data => {
      console.log("ì„œë²„ ì‘ë‹µ:", data);
    })
    .catch(err => {
      console.error("âŒ ì˜¤ë¥˜ ë°œìƒ:", err);
    });
  });
</script>
